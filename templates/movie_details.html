{% extends "base.html" %}
{% block content %}

<h2>{{ movie.title }}</h2>

{% if poster %}
    <img src="{{ poster }}" class="img-fluid mb-3">
{% endif %}

<p>{{ movie.overview }}</p>

<hr>

<h4>{{ 'Értékelés' if lang=='hu' else 'Rating' }}</h4>

{% if current_user.is_authenticated %}

<form action="{{ url_for('user.rate_movie', movie_id=movie.id) }}" method="POST">
    <select name="rating" class="form-control mb-2">
        {% for r in range(1, 11) %}
            <option value="{{ r }}" {% if user_rating == r %}selected{% endif %}>{{ r }}</option>
        {% endfor %}
    </select>

    <button class="btn btn-success">{{ 'Mentés' if lang=='hu' else 'Save' }}</button>
</form>

{% if user_rating %}
<a href="{{ url_for('user.remove_rating', movie_id=movie.id) }}" class="btn btn-danger mt-2">
    {{ 'Értékelés törlése' if lang=='hu' else 'Remove rating' }}
</a>
{% endif %}

<hr>

<h4>{{ 'Kedvencek' if lang=='hu' else 'Favorites' }}</h4>

{% if is_favorite %}
    <a href="{{ url_for('user.remove_favorite', movie_id=movie.id) }}" class="btn btn-warning">
        {{ 'Eltávolítás' if lang=='hu' else 'Remove' }}
    </a>
{% else %}
    <a href="{{ url_for('user.add_favorite', movie_id=movie.id) }}" class="btn btn-primary">
        {{ 'Hozzáadás' if lang=='hu' else 'Add to favorites' }}
    </a>
{% endif %}

{% else %}
<p>{{ 'Jelentkezz be az értékeléshez!' if lang=='hu' else 'Login to rate.' }}</p>
{% endif %}

{% endblock %}
